<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gu√≠a Completa: Callbacks, Promises, Async/Await y APIs</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1e1e1e;
            color: #d4d4d4;
        }
        h1 {
            color: #4ec9b0;
            border-bottom: 3px solid #569cd6;
            padding-bottom: 10px;
        }
        h2 {
            color: #569cd6;
            margin-top: 40px;
        }
        .section {
            background: #2d2d2d;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #4ec9b0;
        }
        .demo-area {
            background: #1e1e1e;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border: 1px solid #3e3e3e;
        }
        button {
            background: #0e639c;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        button:hover {
            background: #1177bb;
        }
        .output {
            background: #0d1117;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            color: #58a6ff;
            min-height: 30px;
        }
        .code-explanation {
            background: #0d1117;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 3px solid #f0883e;
        }
        .separator {
            border: 0;
            height: 2px;
            background: linear-gradient(to right, transparent, #569cd6, transparent);
            margin: 40px 0;
        }
        .note {
            background: #3a2f0b;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #dcdcaa;
            margin: 10px 0;
        }
        .warning {
            background: #4a1f1f;
            padding: 10px;
            border-radius: 5px;
            border-left: 4px solid #f48771;
            margin: 10px 0;
        }
        code {
            background: #3e3e3e;
            padding: 2px 6px;
            border-radius: 3px;
            color: #ce9178;
        }
        input {
            padding: 8px;
            margin: 5px;
            border-radius: 4px;
            border: 1px solid #569cd6;
            background: #1e1e1e;
            color: #d4d4d4;
            font-size: 14px;
        }
    </style>
</head>
<body>

<h1>üìö Gu√≠a Completa: JavaScript As√≠ncrono y APIs</h1>

<div class="note">
    <strong>üí° Concepto clave:</strong> El c√≥digo as√≠ncrono permite ejecutar operaciones que toman tiempo (como peticiones a servidores) sin bloquear el resto del programa.
</div>

<hr class="separator">

<!--////////////////////////////////////////////////////////////////////////-->
<!--                        SECCI√ìN 1: CALLBACKS                            -->
<!--////////////////////////////////////////////////////////////////////////-->

<div class="section">
    <h2>1Ô∏è‚É£ CALLBACKS (Funciones de devoluci√≥n de llamada)</h2>

    <div class="code-explanation">
        <strong>¬øQu√© es un Callback?</strong><br>
        Una funci√≥n que se pasa como argumento a otra funci√≥n para ejecutarse despu√©s.
        <br><br>
        <strong>Sintaxis:</strong> <code>funcionPrincipal(parametro1, parametro2, miCallback)</code>
        <br>
        <strong>‚ö†Ô∏è IMPORTANTE:</strong> Se pasa SIN par√©ntesis ‚Üí <code>miCallback</code> NO <code>miCallback()</code>
    </div>

    <h3>Ejemplo 1: Callback B√°sico</h3>
    <div class="demo-area">
        <button onclick="ejemploCallbackBasico()">Ejecutar Callback B√°sico</button>
        <div class="output" id="output1">Presiona el bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>C√≥digo ejecutado:</strong><br>
        1. <code>myCalculator(5, 5, myDisplayer)</code> ‚Üí Llama a la funci√≥n con 2 n√∫meros y un callback<br>
        2. Dentro de myCalculator: <code>let sum = 5 + 5</code> ‚Üí Calcula la suma<br>
        3. <code>myCallback(sum)</code> ‚Üí Ejecuta el callback pas√°ndole el resultado<br>
        4. myDisplayer recibe 10 y lo muestra en pantalla
    </div>

    <h3>Ejemplo 2: Callback con setTimeout</h3>
    <div class="demo-area">
        <button onclick="ejemploCallbackTimeout()">Ejecutar setTimeout (3 segundos)</button>
        <div class="output" id="output2">Presiona el bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>Flujo de ejecuci√≥n:</strong><br>
        1. <code>setTimeout(myFunction, 3000)</code> ‚Üí Programa la ejecuci√≥n de myFunction<br>
        2. JavaScript contin√∫a ejecutando el resto del c√≥digo (no espera)<br>
        3. Despu√©s de 3000ms (3 segundos), ejecuta myFunction<br>
        4. myFunction actualiza el DOM con el mensaje
    </div>

    <h3>Ejemplo 3: Callback con Array</h3>
    <div class="demo-area">
        <button onclick="ejemploCallbackArray()">Filtrar n√∫meros positivos</button>
        <div class="output" id="output3">Presiona el bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>Explicaci√≥n paso a paso:</strong><br>
        1. Array original: <code>[4, 1, -20, -7, 5, 9, -6]</code><br>
        2. Se pasa <code>(x) => x >= 0</code> como callback a removeNeg<br>
        3. removeNeg itera cada n√∫mero y llama al callback: <code>callback(4)</code> ‚Üí true, lo agrega<br>
        4. <code>callback(-20)</code> ‚Üí false, lo ignora<br>
        5. Retorna solo los positivos: <code>[4, 1, 5, 9]</code>
    </div>
</div>

<hr class="separator">

<!--////////////////////////////////////////////////////////////////////////-->
<!--                        SECCI√ìN 2: PROMISES                             -->
<!--////////////////////////////////////////////////////////////////////////-->

<div class="section">
    <h2>2Ô∏è‚É£ PROMISES (Promesas)</h2>

    <div class="code-explanation">
        <strong>¬øQu√© es una Promise?</strong><br>
        Un objeto que representa el eventual resultado (o error) de una operaci√≥n as√≠ncrona.
        <br><br>
        <strong>Estados de una Promise:</strong><br>
        ‚Ä¢ <code>pending</code> ‚Üí Esperando (resultado: undefined)<br>
        ‚Ä¢ <code>fulfilled</code> ‚Üí Exitosa (resultado: un valor)<br>
        ‚Ä¢ <code>rejected</code> ‚Üí Fallida (resultado: un error)<br>
        <br>
        <strong>M√©todos principales:</strong><br>
        ‚Ä¢ <code>resolve(valor)</code> ‚Üí Marca la promesa como exitosa<br>
        ‚Ä¢ <code>reject(error)</code> ‚Üí Marca la promesa como fallida<br>
        ‚Ä¢ <code>.then()</code> ‚Üí Maneja el resultado exitoso<br>
        ‚Ä¢ <code>.catch()</code> ‚Üí Maneja errores
    </div>

    <h3>Ejemplo 4: Promise B√°sica</h3>
    <div class="demo-area">
        <button onclick="ejemploPromiseBasica()">Ejecutar Promise B√°sica</button>
        <div class="output" id="output4">Presiona el bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>Flujo de ejecuci√≥n:</strong><br>
        1. <code>new Promise(function(resolve, reject) {...})</code> ‚Üí Crea la promesa<br>
        2. <code>let x = 0</code> ‚Üí C√≥digo productor (puede tardar)<br>
        3. <code>if (x == 0) resolve("OK")</code> ‚Üí Cumple la promesa con "OK"<br>
        4. <code>.then(function(value) {...})</code> ‚Üí Consume el resultado "OK"<br>
        5. <code>myDisplayer(value)</code> ‚Üí Muestra "OK" en pantalla
    </div>

    <h3>Ejemplo 5: Promise con setTimeout</h3>
    <div class="demo-area">
        <button onclick="ejemploPromiseTimeout()">Ejecutar Promise con delay (3s)</button>
        <div class="output" id="output5">Presiona el bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>Diferencia con callback tradicional:</strong><br>
        1. Promise encapsula la operaci√≥n as√≠ncrona<br>
        2. <code>setTimeout</code> llama a <code>resolve("I love You !!")</code> despu√©s de 3s<br>
        3. <code>.then()</code> se ejecuta autom√°ticamente cuando la promesa se resuelve<br>
        4. M√°s limpio que anidar callbacks (evita "callback hell")
    </div>

    <h3>Ejemplo 6: Promise con manejo de errores</h3>
    <div class="demo-area">
        <button onclick="ejemploPromiseError(true)">Promise exitosa</button>
        <button onclick="ejemploPromiseError(false)">Promise con error</button>
        <div class="output" id="output6">Presiona un bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>Manejo de √©xito y error:</strong><br>
        1. Promise puede llamar <code>resolve()</code> o <code>reject()</code><br>
        2. <code>.then()</code> recibe dos funciones: una para √©xito, otra para error<br>
        3. Si se llama <code>resolve("OK")</code> ‚Üí ejecuta la primera funci√≥n<br>
        4. Si se llama <code>reject("Error")</code> ‚Üí ejecuta la segunda funci√≥n<br>
        5. Alternativa: usar <code>.catch()</code> para manejar solo errores
    </div>
</div>

<hr class="separator">

<!--////////////////////////////////////////////////////////////////////////-->
<!--                    SECCI√ìN 3: ASYNC/AWAIT                              -->
<!--////////////////////////////////////////////////////////////////////////-->

<div class="section">
    <h2>3Ô∏è‚É£ ASYNC/AWAIT (Sintaxis moderna)</h2>

    <div class="code-explanation">
        <strong>¬øQu√© es Async/Await?</strong><br>
        Sintaxis m√°s limpia para trabajar con Promises, hace que el c√≥digo as√≠ncrono se vea s√≠ncrono.
        <br><br>
        <strong>Palabras clave:</strong><br>
        ‚Ä¢ <code>async</code> ‚Üí Declara que una funci√≥n retorna una Promise<br>
        ‚Ä¢ <code>await</code> ‚Üí Pausa la ejecuci√≥n hasta que la Promise se resuelva<br>
        <br>
        <strong>‚ö†Ô∏è REGLA:</strong> <code>await</code> solo puede usarse dentro de funciones <code>async</code>
    </div>

    <h3>Ejemplo 7: Async/Await B√°sico</h3>
    <div class="demo-area">
        <button onclick="ejemploAsyncBasico()">Ejecutar Async/Await</button>
        <div class="output" id="output7">Presiona el bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>Transformaci√≥n de Promise a Async/Await:</strong><br>
        <strong>Con Promise:</strong><br>
        <code>myPromise.then(function(value) { mostrar(value); })</code><br>
        <br>
        <strong>Con Async/Await:</strong><br>
        <code>let value = await myPromise; mostrar(value);</code><br>
        <br>
        <strong>Flujo paso a paso:</strong><br>
        1. <code>async function myDisplay()</code> ‚Üí Declara funci√≥n as√≠ncrona<br>
        2. <code>let myPromise = new Promise(...)</code> ‚Üí Crea promesa que se resuelve inmediatamente<br>
        3. <code>await myPromise</code> ‚Üí Pausa la funci√≥n hasta obtener el resultado<br>
        4. Contin√∫a con el resultado y actualiza el DOM
    </div>

    <h3>Ejemplo 8: Async/Await con setTimeout</h3>
    <div class="demo-area">
        <button onclick="ejemploAsyncTimeout()">Ejecutar Async con delay (3s)</button>
        <div class="output" id="output8">Presiona el bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>Ventaja sobre Promises tradicionales:</strong><br>
        1. El c√≥digo se lee de arriba a abajo, como c√≥digo s√≠ncrono<br>
        2. No necesitas encadenar <code>.then()</code><br>
        3. <code>await myPromise</code> espera 3 segundos y luego contin√∫a<br>
        4. El resultado se guarda directamente en una variable
    </div>

    <h3>Ejemplo 9: Async/Await con manejo de errores</h3>
    <div class="demo-area">
        <button onclick="ejemploAsyncError(true)">Async exitoso</button>
        <button onclick="ejemploAsyncError(false)">Async con error</button>
        <div class="output" id="output9">Presiona un bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>Manejo de errores con try/catch:</strong><br>
        1. Se envuelve el c√≥digo <code>await</code> en un bloque <code>try</code><br>
        2. Si la promesa se resuelve con <code>resolve()</code> ‚Üí ejecuta el c√≥digo try<br>
        3. Si la promesa se rechaza con <code>reject()</code> ‚Üí salta al bloque <code>catch</code><br>
        4. <code>catch(error)</code> captura el error y lo maneja<br>
        5. M√°s legible que manejar errores con <code>.then().catch()</code>
    </div>
</div>

<hr class="separator">

<!--////////////////////////////////////////////////////////////////////////-->
<!--                    SECCI√ìN 4: WEB APIs                                 -->
<!--////////////////////////////////////////////////////////////////////////-->

<div class="section">
    <h2>4Ô∏è‚É£ WEB APIs - ¬øD√ìNDE ENTRAN LAS APIs?</h2>

    <div class="warning">
        <strong>üî• RESPUESTA DIRECTA: ¬øD√≥nde entra la API?</strong><br><br>
        Las APIs (Application Programming Interface) son interfaces que permiten que tu c√≥digo JavaScript se comunique con:<br>
        ‚Ä¢ <strong>Navegador:</strong> Geolocalizaci√≥n, LocalStorage, Validaci√≥n de formularios<br>
        ‚Ä¢ <strong>Servidores externos:</strong> Backend propio, APIs de terceros (Twitter, YouTube, OpenAI)<br>
        ‚Ä¢ <strong>Funcionalidades del SO:</strong> Acceso a c√°mara, micr√≥fono, archivos<br>
        <br>
        Las APIs se consumen principalmente con <strong>Promises</strong> y <strong>Async/Await</strong> porque son operaciones as√≠ncronas.
    </div>

    <div class="code-explanation">
        <strong>Tipos de Web APIs:</strong><br>
        <br>
        <strong>1. APIs del Navegador (Browser APIs):</strong><br>
        ‚Ä¢ Geolocation API ‚Üí Obtener ubicaci√≥n del usuario<br>
        ‚Ä¢ Fetch API ‚Üí Hacer peticiones HTTP<br>
        ‚Ä¢ LocalStorage API ‚Üí Guardar datos en el navegador<br>
        ‚Ä¢ Validation API ‚Üí Validar formularios HTML5<br>
        ‚Ä¢ Canvas API ‚Üí Dibujar gr√°ficos 2D/3D<br>
        <br>
        <strong>2. APIs de Terceros (Third-party APIs):</strong><br>
        ‚Ä¢ YouTube API ‚Üí Reproducir videos<br>
        ‚Ä¢ Twitter API ‚Üí Mostrar tweets<br>
        ‚Ä¢ Google Maps API ‚Üí Mostrar mapas<br>
        ‚Ä¢ OpenWeather API ‚Üí Datos del clima<br>
        ‚Ä¢ REST APIs propias ‚Üí Tu backend Node.js/Express
    </div>

    <h3>Ejemplo 10: Geolocation API (Browser API)</h3>
    <div class="demo-area">
        <button onclick="obtenerUbicacion()">Obtener Mi Ubicaci√≥n</button>
        <div class="output" id="output14">Presiona el bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>Flujo de ejecuci√≥n con Geolocation API:</strong><br>
        1. <code>navigator.geolocation</code> ‚Üí Accede a la API de geolocalizaci√≥n del navegador<br>
        2. <code>getCurrentPosition(callback)</code> ‚Üí Solicita la ubicaci√≥n (operaci√≥n as√≠ncrona)<br>
        3. El navegador pide permiso al usuario<br>
        4. <code>callback(position)</code> ‚Üí Se ejecuta cuando se obtiene la ubicaci√≥n<br>
        5. <code>position.coords.latitude</code> ‚Üí Extrae las coordenadas<br>
        <br>
        <strong>‚ö†Ô∏è IMPORTANTE:</strong> Esta es una API de callback antigua, no retorna Promise por defecto.
    </div>

    <h3>Ejemplo 11: Validation API (Formularios HTML5)</h3>
    <div class="demo-area">
        <input id="numInput" type="number" min="100" max="300" required placeholder="Ingresa un n√∫mero (100-300)">
        <button onclick="validarInput()">Validar</button>
        <div class="output" id="output15">Ingresa un n√∫mero y valida...</div>
    </div>

    <div class="code-explanation">
        <strong>M√©todos de Validation API:</strong><br>
        ‚Ä¢ <code>checkValidity()</code> ‚Üí Retorna true si el input es v√°lido<br>
        ‚Ä¢ <code>validationMessage</code> ‚Üí Mensaje de error del navegador<br>
        ‚Ä¢ <code>validity.rangeOverflow</code> ‚Üí True si el valor excede el m√°ximo<br>
        ‚Ä¢ <code>validity.rangeUnderflow</code> ‚Üí True si el valor es menor que el m√≠nimo<br>
        ‚Ä¢ <code>validity.valueMissing</code> ‚Üí True si el campo requerido est√° vac√≠o<br>
        <br>
        <strong>Validaci√≥n paso a paso:</strong><br>
        1. Usuario ingresa un valor en el input<br>
        2. <code>document.getElementById("numInput")</code> ‚Üí Obtiene el elemento<br>
        3. <code>input.checkValidity()</code> ‚Üí Verifica si cumple las restricciones HTML5<br>
        4. Si es inv√°lido, muestra <code>input.validationMessage</code><br>
        5. No requiere Promises porque es s√≠ncrono
    </div>

    <h3>Ejemplo 12: Fetch API con Async/Await (AQU√ç SE JUNTAN)</h3>
    <div class="demo-area">
        <button onclick="obtenerDatosAPI()">Obtener Datos de API (JSONPlaceholder)</button>
        <div class="output" id="output16">Presiona el bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>üéØ AQU√ç SE CONECTA TODO: API + Async/Await</strong><br>
        <br>
        <strong>C√≥digo ejecutado:</strong><br>
        <code>
async function obtenerDatosAPI() {<br>
&nbsp;&nbsp;try {<br>
&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch('https://jsonplaceholder.typicode.com/users/1');<br>
&nbsp;&nbsp;&nbsp;&nbsp;const data = await response.json();<br>
&nbsp;&nbsp;&nbsp;&nbsp;mostrar(data.name);<br>
&nbsp;&nbsp;} catch (error) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;mostrar("Error: " + error);<br>
&nbsp;&nbsp;}<br>
}
        </code>
        <br><br>
        <strong>Flujo paso a paso:</strong><br>
        1. <code>fetch(url)</code> ‚Üí Retorna una Promise que hace petici√≥n HTTP GET<br>
        2. <code>await fetch(...)</code> ‚Üí Pausa hasta recibir la respuesta del servidor<br>
        3. <code>response.json()</code> ‚Üí Retorna otra Promise que convierte la respuesta a JSON<br>
        4. <code>await response.json()</code> ‚Üí Pausa hasta que el JSON est√© listo<br>
        5. <code>data.name</code> ‚Üí Accede a los datos ya parseados<br>
        6. Si hay error de red, salta al bloque <code>catch</code><br>
        <br>
        <strong>‚≠ê CONCLUSI√ìN:</strong> Fetch API es as√≠ncrona, retorna Promises, por eso se usa con async/await.
    </div>
</div>

<hr class="separator">

<!--////////////////////////////////////////////////////////////////////////-->
<!--                    SECCI√ìN 5: COMPARACI√ìN                              -->
<!--////////////////////////////////////////////////////////////////////////-->

<div class="section">
    <h2>5Ô∏è‚É£ COMPARACI√ìN: Los 3 enfoques del mismo problema</h2>

    <div class="note">
        <strong>üíª COMPATIBILIDAD DE NAVEGADORES:</strong><br>
        ‚Ä¢ Callbacks: Todos los navegadores (desde siempre)<br>
        ‚Ä¢ Promises: Chrome 33+, Firefox 29+, Safari 7.1+ (2014)<br>
        ‚Ä¢ Async/Await: Chrome 55+, Firefox 52+, Safari 11+ (2016-2017)<br>
        ‚Ä¢ Fetch API: Chrome 42+, Firefox 39+, Safari 10.1+ (2015-2017)<br>
        <br>
        Para proyectos modernos con Babel/Webpack, puedes usar async/await sin problemas.
    </div>

    <div class="code-explanation">
        <strong>üî• PATR√ìN MERN STACK COMPLETO:</strong><br>
        <br>
        <strong>FRONTEND (React):</strong><br>
        <code>
useEffect(() => {<br>
&nbsp;&nbsp;async function cargarDatos() {<br>
&nbsp;&nbsp;&nbsp;&nbsp;try {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const res = await fetch('/api/usuarios');<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const data = await res.json();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setUsuarios(data);<br>
&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error(error);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;}<br>
&nbsp;&nbsp;cargarDatos();<br>
}, []);
        </code>
        <br><br>
        <strong>BACKEND (Node.js/Express):</strong><br>
        <code>
app.get('/api/usuarios', async (req, res) => {<br>
&nbsp;&nbsp;try {<br>
&nbsp;&nbsp;&nbsp;&nbsp;const usuarios = await Usuario.find();<br>
&nbsp;&nbsp;&nbsp;&nbsp;res.json(usuarios);<br>
&nbsp;&nbsp;} catch (error) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;res.status(500).json({ error: error.message });<br>
&nbsp;&nbsp;}<br>
});
        </code>
    </div>
</div>

<hr class="separator">

<div style="text-align: center; padding: 20px; color: #888;">
    <p>üìö Gu√≠a completa de JavaScript As√≠ncrono y Web APIs</p>
    <p>Callbacks ‚Üí Promises ‚Üí Async/Await ‚Üí APIs</p>
    <p>Desarrollado con HTML, CSS y JavaScript vanilla</p>
</div>

<!--////////////////////////////////////////////////////////////////////////-->
<!--                        JAVASCRIPT CODE                                 -->
<!--////////////////////////////////////////////////////////////////////////-->

<script>
// Funci√≥n helper para mostrar output
function mostrarOutput(id, mensaje) {
    document.getElementById(id).innerHTML = mensaje;
}

////////////////////////////////////////////////////////////////////////
//                    SECCI√ìN 1: CALLBACKS                            //
////////////////////////////////////////////////////////////////////////

// Ejemplo 1: Callback B√°sico
function ejemploCallbackBasico() {
    function myDisplayer(resultado) {
        mostrarOutput('output1', `‚úÖ Resultado: ${resultado}`);
    }

    function myCalculator(num1, num2, myCallback) {
        let sum = num1 + num2;
        myCallback(sum); // Ejecuta el callback con el resultado
    }

    mostrarOutput('output1', '‚è≥ Calculando...');
    myCalculator(5, 5, myDisplayer);
}

// Ejemplo 2: Callback con setTimeout
function ejemploCallbackTimeout() {
    mostrarOutput('output2', '‚è≥ Esperando 3 segundos...');

    setTimeout(function() {
        mostrarOutput('output2', '‚úÖ ¬°I love You! (despu√©s de 3 segundos)');
    }, 3000);
}

// Ejemplo 3: Callback con Array
function ejemploCallbackArray() {
    const myNumbers = [4, 1, -20, -7, 5, 9, -6];

    function removeNeg(numbers, callback) {
        const myArray = [];
        for (const x of numbers) {
            if (callback(x)) {
                myArray.push(x);
            }
        }
        return myArray;
    }

    const posNumbers = removeNeg(myNumbers, (x) => x >= 0);
    mostrarOutput('output3', `Array original: [${myNumbers}]<br>‚úÖ Solo positivos: [${posNumbers}]`);
}

////////////////////////////////////////////////////////////////////////
//                    SECCI√ìN 2: PROMISES                             //
////////////////////////////////////////////////////////////////////////

// Ejemplo 4: Promise B√°sica
function ejemploPromiseBasica() {
    mostrarOutput('output4', '‚è≥ Ejecutando Promise...');

    let myPromise = new Promise(function(resolve, reject) {
        let x = 0;

        if (x == 0) {
            resolve("‚úÖ OK - Promise resuelta con √©xito");
        } else {
            reject("‚ùå Error - Promise rechazada");
        }
    });

    myPromise.then(
        function(value) { mostrarOutput('output4', value); },
        function(error) { mostrarOutput('output4', error); }
    );
}

// Ejemplo 5: Promise con setTimeout
function ejemploPromiseTimeout() {
    mostrarOutput('output5', '‚è≥ Esperando 3 segundos...');

    let myPromise = new Promise(function(resolve) {
        setTimeout(function() {
            resolve("‚úÖ I love You !! (Promise resuelta despu√©s de 3s)");
        }, 3000);
    });

    myPromise.then(function(value) {
        mostrarOutput('output5', value);
    });
}

// Ejemplo 6: Promise con manejo de errores
function ejemploPromiseError(exitoso) {
    mostrarOutput('output6', '‚è≥ Ejecutando Promise...');

    let myPromise = new Promise(function(resolve, reject) {
        setTimeout(function() {
            if (exitoso) {
                resolve("‚úÖ Operaci√≥n exitosa");
            } else {
                reject("‚ùå Error: Operaci√≥n fallida");
            }
        }, 1000);
    });

    myPromise.then(
        function(value) { mostrarOutput('output6', value); },
        function(error) { mostrarOutput('output6', error); }
    );
}

////////////////////////////////////////////////////////////////////////
//                    SECCI√ìN 3: ASYNC/AWAIT                          //
////////////////////////////////////////////////////////////////////////

// Ejemplo 7: Async/Await B√°sico
async function ejemploAsyncBasico() {
    mostrarOutput('output7', '‚è≥ Ejecutando Async/Await...');

    let myPromise = new Promise(function(resolve) {
        resolve("‚úÖ I love You !! (con async/await)");
    });

    const resultado = await myPromise;
    mostrarOutput('output7', resultado);
}

// Ejemplo 8: Async/Await con setTimeout
async function ejemploAsyncTimeout() {
    mostrarOutput('output8', '‚è≥ Esperando 3 segundos...');

    let myPromise = new Promise(function(resolve) {
        setTimeout(function() {
            resolve("‚úÖ I love You !! (async/await despu√©s de 3s)");
        }, 3000);
    });

    const resultado = await myPromise;
    mostrarOutput('output8', resultado);
}

// Ejemplo 9: Async/Await con manejo de errores
async function ejemploAsyncError(exitoso) {
    mostrarOutput('output9', '‚è≥ Ejecutando Async/Await con manejo de errores...');

    try {
        let myPromise = new Promise(function(resolve, reject) {
            setTimeout(function() {
                if (exitoso) {
                    resolve("‚úÖ Operaci√≥n exitosa (con try/catch)");
                } else {
                    reject("‚ùå Error capturado en catch block");
                }
            }, 1000);
        });

        const resultado = await myPromise;
        mostrarOutput('output9', resultado);
    } catch (error) {
        mostrarOutput('output9', error);
    }
}

////////////////////////////////////////////////////////////////////////
//                    SECCI√ìN 4: WEB APIs                             //
////////////////////////////////////////////////////////////////////////

// Ejemplo 10: Geolocation API
function obtenerUbicacion() {
    mostrarOutput('output14', '‚è≥ Solicitando ubicaci√≥n...');

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            function(position) {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;
                mostrarOutput('output14',
                    `‚úÖ Ubicaci√≥n obtenida:<br>Latitud: ${lat.toFixed(6)}<br>Longitud: ${lon.toFixed(6)}`
                );
            },
            function(error) {
                mostrarOutput('output14', `‚ùå Error: ${error.message}`);
            }
        );
    } else {
        mostrarOutput('output14', '‚ùå Geolocation no soportada por este navegador');
    }
}

// Ejemplo 11: Validation API
function validarInput() {
    const input = document.getElementById("numInput");

    if (!input.checkValidity()) {
        // El input no es v√°lido
        mostrarOutput('output15', `‚ùå Error: ${input.validationMessage}`);

        // Verificar tipos espec√≠ficos de error
        if (input.validity.rangeOverflow) {
            mostrarOutput('output15', '‚ùå El valor es mayor que 300');
        } else if (input.validity.rangeUnderflow) {
            mostrarOutput('output15', '‚ùå El valor es menor que 100');
        } else if (input.validity.valueMissing) {
            mostrarOutput('output15', '‚ùå Este campo es requerido');
        }
    } else {
        // El input es v√°lido
        mostrarOutput('output15', `‚úÖ Valor v√°lido: ${input.value}`);
    }
}

// Ejemplo 12: Fetch API con Async/Await
async function obtenerDatosAPI() {
    mostrarOutput('output16', '‚è≥ Obteniendo datos de la API...');

    try {
        // Hacer petici√≥n GET a JSONPlaceholder (API de prueba)
        const response = await fetch('https://jsonplaceholder.typicode.com/users/1');

        // Verificar si la respuesta fue exitosa
        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        // Convertir respuesta a JSON
        const data = await response.json();

        // Mostrar datos
        mostrarOutput('output16',
            `‚úÖ Usuario obtenido:<br>` +
            `Nombre: ${data.name}<br>` +
            `Email: ${data.email}<br>` +
            `Ciudad: ${data.address.city}`
        );
    } catch (error) {
        mostrarOutput('output16', `‚ùå Error: ${error.message}`);
    }
}

////////////////////////////////////////////////////////////////////////
//                    SECCI√ìN 5: COMPARACI√ìN                          //
////////////////////////////////////////////////////////////////////////

async function compararEnfoques() {
    mostrarOutput('output10', '‚è≥ Iniciando comparaci√≥n...<br><br>');

    // 1. CALLBACK
    mostrarOutput('output10', document.getElementById('output10').innerHTML +
        '1Ô∏è‚É£ CALLBACK: Esperando 2 segundos...<br>');

    await new Promise(resolve => {
        setTimeout(function() {
            mostrarOutput('output10', document.getElementById('output10').innerHTML +
                '‚úÖ Callback completado<br><br>');
            resolve();
        }, 2000);
    });

    // 2. PROMISE
    mostrarOutput('output10', document.getElementById('output10').innerHTML +
        '2Ô∏è‚É£ PROMISE: Esperando 2 segundos...<br>');

    await new Promise(function(resolve) {
        setTimeout(function() {
            resolve('‚úÖ Promise completada<br><br>');
        }, 2000);
    }).then(function(mensaje) {
        mostrarOutput('output10', document.getElementById('output10').innerHTML + mensaje);
    });

    // 3. ASYNC/AWAIT
    mostrarOutput('output10', document.getElementById('output10').innerHTML +
        '3Ô∏è‚É£ ASYNC/AWAIT: Esperando 2 segundos...<br>');

    await new Promise(resolve => setTimeout(resolve, 2000));

    mostrarOutput('output10', document.getElementById('output10').innerHTML +
        '‚úÖ Async/Await completado<br><br>' +
        'üéâ Comparaci√≥n terminada!');
}

////////////////////////////////////////////////////////////////////////
//                    SECCI√ìN 6: EJEMPLO REAL COMPLETO                //
////////////////////////////////////////////////////////////////////////

// Ejemplo con Callback (XMLHttpRequest - antiguo)
function ejemploRealCallback() {
    mostrarOutput('output11', '‚è≥ Cargando con XMLHttpRequest (callback)...');

    const xhr = new XMLHttpRequest();
    xhr.open('GET', 'https://jsonplaceholder.typicode.com/users/2');

    xhr.onload = function() {
        if (xhr.status === 200) {
            const data = JSON.parse(xhr.responseText);
            mostrarOutput('output11',
                `‚úÖ Usuario: ${data.name}<br>` +
                `Empresa: ${data.company.name}<br>` +
                `M√©todo: XMLHttpRequest (callback antiguo)`
            );
        } else {
            mostrarOutput('output11', `‚ùå Error: ${xhr.status}`);
        }
    };

    xhr.onerror = function() {
        mostrarOutput('output11', '‚ùå Error de red');
    };

    xhr.send();
}

// Ejemplo con Promise (Fetch)
function ejemploRealPromise() {
    mostrarOutput('output12', '‚è≥ Cargando con Fetch (promise)...');

    fetch('https://jsonplaceholder.typicode.com/users/3')
        .then(function(response) {
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
        })
        .then(function(data) {
            mostrarOutput('output12',
                `‚úÖ Usuario: ${data.name}<br>` +
                `Email: ${data.email}<br>` +
                `M√©todo: Fetch API con .then()`
            );
        })
        .catch(function(error) {
            mostrarOutput('output12', `‚ùå Error: ${error.message}`);
        });
}

// Ejemplo con Async/Await (Fetch - RECOMENDADO)
async function ejemploRealAsync() {
    mostrarOutput('output13', '‚è≥ Cargando con Fetch (async/await)...');

    try {
        const response = await fetch('https://jsonplaceholder.typicode.com/users/4');

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();

        mostrarOutput('output13',
            `‚úÖ Usuario: ${data.name}<br>` +
            `Tel√©fono: ${data.phone}<br>` +
            `Website: ${data.website}<br>` +
            `M√©todo: Fetch API con async/await ‚≠ê`
        );
    } catch (error) {
        mostrarOutput('output13', `‚ùå Error: ${error.message}`);
    }
}
</script>

</body>
</html>>Problema:</strong> Esperar 2 segundos y luego mostrar un mensaje
    </div>

    <div class="demo-area">
        <button onclick="compararEnfoques()">Ejecutar los 3 enfoques (2s cada uno)</button>
        <div class="output" id="output10">Presiona el bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>1. CALLBACK (estilo antiguo):</strong><br>
        <code>setTimeout(function() { mostrar("Mensaje"); }, 2000);</code><br>
        ‚úÖ Simple para casos b√°sicos<br>
        ‚ùå Se vuelve confuso con operaciones anidadas ("callback hell")<br>
        <br>
        <strong>2. PROMISE (ES6 - 2015):</strong><br>
        <code>new Promise(resolve => setTimeout(() => resolve("Mensaje"), 2000)).then(mostrar);</code><br>
        ‚úÖ Evita el callback hell<br>
        ‚úÖ Mejor manejo de errores<br>
        ‚ùå Sintaxis un poco verbosa<br>
        <br>
        <strong>3. ASYNC/AWAIT (ES2017):</strong><br>
        <code>await new Promise(resolve => setTimeout(() => resolve("Mensaje"), 2000));</code><br>
        ‚úÖ Sintaxis m√°s limpia y legible<br>
        ‚úÖ Se lee como c√≥digo s√≠ncrono<br>
        ‚úÖ Mejor manejo de errores con try/catch<br>
        ‚≠ê <strong>RECOMENDADO para proyectos modernos</strong>
    </div>
</div>

<hr class="separator">

<!--////////////////////////////////////////////////////////////////////////-->
<!--                    SECCI√ìN 6: EJEMPLO REAL COMPLETO                    -->
<!--////////////////////////////////////////////////////////////////////////-->

<div class="section">
    <h2>6Ô∏è‚É£ EJEMPLO REAL: Aplicaci√≥n Completa con API</h2>

    <div class="note">
        <strong>Escenario MERN Stack:</strong> Obtener lista de usuarios desde una API REST
    </div>

    <h3>Con Callback (XMLHttpRequest - estilo antiguo)</h3>
    <div class="demo-area">
        <button onclick="ejemploRealCallback()">Cargar con Callback (XMLHttpRequest)</button>
        <div class="output" id="output11">Presiona el bot√≥n...</div>
    </div>

    <h3>Con Promise (Fetch API)</h3>
    <div class="demo-area">
        <button onclick="ejemploRealPromise()">Cargar con Promise (Fetch)</button>
        <div class="output" id="output12">Presiona el bot√≥n...</div>
    </div>

    <h3>Con Async/Await (Fetch API - RECOMENDADO)</h3>
    <div class="demo-area">
        <button onclick="ejemploRealAsync()">Cargar con Async/Await (Fetch)</button>
        <div class="output" id="output13">Presiona el bot√≥n...</div>
    </div>

    <div class="code-explanation">
        <strong>Comparaci√≥n de los 3 enfoques para hacer peticiones HTTP:</strong><br>
        <br>
        <strong>1. CALLBACK con XMLHttpRequest:</strong><br>
        ‚Ä¢ API antigua (pre-ES6)<br>
        ‚Ä¢ Requiere configurar manualmente onload, onerror, etc.<br>
        ‚Ä¢ Propenso a "callback hell" si encadenas peticiones<br>
        ‚Ä¢ Todav√≠a funciona pero NO recomendado<br>
        <br>
        <strong>2. PROMISE con Fetch:</strong><br>
        ‚Ä¢ API moderna del navegador<br>
        ‚Ä¢ Retorna Promises autom√°ticamente<br>
        ‚Ä¢ Encadenas con .then().then().catch()<br>
        ‚Ä¢ Mejor que XMLHttpRequest pero sintaxis verbosa<br>
        <br>
        <strong>3. ASYNC/AWAIT con Fetch:</strong><br>
        ‚Ä¢ ‚≠ê <strong>RECOMENDADO</strong> para MERN Stack<br>
        ‚Ä¢ C√≥digo se lee de forma lineal<br>
        ‚Ä¢ Manejo de errores con try/catch<br>
        ‚Ä¢ M√°s f√°cil de depurar y mantener
    </div>
</div>

<hr class="separator">

<!--////////////////////////////////////////////////////////////////////////-->
<!--                    SECCI√ìN 7: RESUMEN Y MEJORES PR√ÅCTICAS              -->
<!--////////////////////////////////////////////////////////////////////////-->

<div class="section">
    <h2>7Ô∏è‚É£ RESUMEN Y MEJORES PR√ÅCTICAS</h2>

    <div class="code-explanation">
        <strong>üìã CU√ÅNDO USAR CADA UNO:</strong><br>
        <br>
        <strong>CALLBACKS:</strong><br>
        ‚Ä¢ Event listeners: <code>button.addEventListener('click', callback)</code><br>
        ‚Ä¢ setTimeout/setInterval simples<br>
        ‚Ä¢ APIs antiguas que solo aceptan callbacks (Geolocation)<br>
        <br>
        <strong>PROMISES:</strong><br>
        ‚Ä¢ Cuando usas Fetch API o librer√≠as que retornan Promises (axios)<br>
        ‚Ä¢ Encadenar operaciones: <code>.then().then().catch()</code><br>
        ‚Ä¢ <code>Promise.all()</code> para ejecutar m√∫ltiples promesas en paralelo<br>
        <br>
        <strong>ASYNC/AWAIT:</strong><br>
        ‚Ä¢ ‚≠ê Para la mayor√≠a de c√≥digo as√≠ncrono moderno<br>
        ‚Ä¢ Consumir APIs REST (fetch, axios)<br>
        ‚Ä¢ Operaciones as√≠ncronas m√∫ltiples con l√≥gica compleja<br>
        ‚Ä¢ Manejo de errores m√°s claro con try/catch<br>
        <br>
        <strong>WEB APIs:</strong><br>
        ‚Ä¢ <code>fetch()</code> ‚Üí Peticiones HTTP (retorna Promise)<br>
        ‚Ä¢ <code>navigator.geolocation</code> ‚Üí Ubicaci√≥n (usa callback)<br>
        ‚Ä¢ <code>localStorage</code> ‚Üí Almacenamiento (s√≠ncrono, no requiere async)<br>
        ‚Ä¢ <code>input.checkValidity()</code> ‚Üí Validaci√≥n (s√≠ncrono)<br>
        <br>
        <strong>‚ö†Ô∏è ERRORES COMUNES:</strong><br>
        1. Pasar callback con par√©ntesis: <code>setTimeout(myFunc(), 1000)</code> ‚ùå<br>
        ‚Üí Correcto: <code>setTimeout(myFunc, 1000)</code> ‚úÖ<br>
        <br>
        2. Olvidar <code>await</code> en funciones async:<br>
        ‚Üí Sin await: retorna Promise pendiente<br>
        ‚Üí Con await: retorna el valor resuelto<br>
        <br>
        3. No manejar errores en APIs:<br>
        ‚Üí Siempre usar <code>try/catch</code> con async/await<br>
        ‚Üí O <code>.catch()</code> con Promises<br>
        <br>
        4. Usar <code>await</code> fuera de funci√≥n <code>async</code>:<br>
        ‚Üí Solo funciona dentro de funciones declaradas como <code>async</code><br>
        <br>
        5. No verificar status en fetch:<br>
        ‚Üí <code>fetch()</code> no rechaza en errores HTTP 404, 500<br>
        ‚Üí Verificar <code>response.ok</code> manualmente<br>
        <br>
        <strong>üéØ RECOMENDACI√ìN PARA MERN STACK:</strong><br>
        ‚Ä¢ <strong>Backend (Node.js/Express):</strong> async/await con try/catch<br>
        ‚Ä¢ <strong>Frontend (React):</strong> async/await dentro de useEffect o event handlers<br>
        ‚Ä¢ <strong>Peticiones HTTP:</strong> fetch() o axios con async/await<br>
        ‚Ä¢ <strong>Validaci√≥n de formularios:</strong> Validation API del navegador<br>
        ‚Ä¢ <strong>Operaciones en paralelo:</strong> Promise.all([fetch1, fetch2])
    </div>

    <div class="note">
        <strong
